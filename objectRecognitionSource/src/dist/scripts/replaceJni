#Save relevant file locations
TARGETFILE="$(readlink -f $1)"
JARFILE="$(readlink -f ../lib/libtensorflow_jni*.jar)"

#Create and move to a temporary directory
mkdir temp || { echo Please remove the \'temp\' directory or call from a different location ; exit 1 ;}
pushd temp

#Extract the jar to the current location (the new 'temp' dir)
jar xf $JARFILE

#Copy the target file to each OS site
#I could figure out which OS this is on, but the compilation
#is computer specific, so it wouldn't matter anyways
cp $TARGETFILE org/tensorflow/native/darwin-x86_64/
cp $TARGETFILE org/tensorflow/native/linux-x86_64/
cp $TARGETFILE org/tensorflow/native/windows-x86_64/

#Recreate the jar with the new .so/.dll
jar cf $JARFILE *

#Move back to the original directory
popd

#Remove the temporary directory
rm -rf temp