group 'io.vantiq'
version 'unspecified'

buildscript {
    repositories { jcenter() }
    dependencies {
        classpath 'com.github.jengelman.gradle.plugins:shadow:2.0.0'
    }
}

apply plugin: 'java'
apply plugin: 'application'
apply plugin: 'idea'
apply plugin: 'eclipse'

sourceCompatibility = 1.8

ext {
    jacksonVersion = '2.9.3'
    eclipseMiloVersion = '0.2.1'
    lombokVersion = '1.16.18'
}

repositories {
    mavenCentral()
    jcenter()
}

dependencies {
    // compile files('../extjsdk/build/libs/extjsdk-all.jar')
    compile project(":extjsdk")

    compile "org.projectlombok:lombok:${lombokVersion}"
    compile 'ch.qos.logback:logback-classic:1.2.3'
    compile "com.fasterxml.jackson.core:jackson-databind:${jacksonVersion}"
    compile 'commons-cli:commons-cli:1.4'
    compile 'org.codehaus.groovy:groovy-all:2.3.11'
    compile "org.eclipse.milo:sdk-client:${eclipseMiloVersion}"
    testCompile group: 'junit', name: 'junit', version: '4.12'
    testCompile "org.eclipse.milo:client-examples:${eclipseMiloVersion}"
}

mainClassName = 'io.vantiq.extsrc.opcua.opcUaSource.OpcUaServer'

test {
    useJUnit {
        excludeCategories 'io.vantiq.extsrc.opcua.categories.OnlyHandTests'
    }
}

task generateJavadoc(type: Javadoc) {
    source = sourceSets.main.allJava
    classpath = sourceSets.main.compileClasspath
}

task runExampleServer(type: JavaExec) {
    main = "io.vantiq.extsrc.opcua.io.vantiq.extsrc.opcua.sampleServer.RunExampleServer"
    classpath = sourceSets.test.runtimeClasspath
}